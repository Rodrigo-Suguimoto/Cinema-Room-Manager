<h2>Constants. Final variables</h2>
<div class="step-text">
<p>Sometimes, you need to use a variable that should not be <a class="theory-lookup" href="/learn/step/10982" rel="noopener noreferrer nofollow" target="_blank" title="In Java, modify refers to the act of changing the value of a variable or object. | This can be done through assignment operators, which alter the value of a variable, or by using methods or functions that change the state of an object. It's important to note that strings in Java are immutable, meaning they cannot be modified once created. Instead, a new string must be created if changes are needed. Additionally, there are modifier keywords in Java that define the visibility and behavior of methods and classes.">modified</a> during the program. Such variables are known as <strong><a class="theory-lookup" href="/learn/step/13511" rel="noopener noreferrer nofollow" target="_blank" title="In Java, a constant is a variable that is declared with the 'final' keyword, indicating that its value cannot be modified once assigned. | This makes constants ideal for values that should remain constant throughout the execution of a program, such as mathematical constants or string texts. Constants are typically written in all uppercase letters to distinguish them from regular variables, and they can be accessed multiple times without changing their value.">constants</a></strong>. Java provides a special <a class="theory-lookup" href="/learn/step/3521" rel="noopener noreferrer nofollow" target="_blank" title="In Java, a keyword is a reserved word that has a special meaning in the programming language. | These words cannot be used as variable names in your own program. Keywords are part of the syntax, a set of rules that define how a program needs to be written in order to be valid. For instance, the keyword 'final' is used to declare a constant variable, indicating that its value cannot be changed after being initialized. However, the use of keywords can sometimes make code less readable due to boilerplate code, hence their usage should be standardized in a project.">keyword</a> called <code class="language-java">final</code> to declare them. The only difference between a regular variable and a <a class="theory-lookup" href="/learn/step/11635" rel="noopener noreferrer nofollow" target="_blank" title="A final variable in Java is a variable that cannot be reassigned a new value once it has been initialized. | It is essentially a constant that retains its initial value throughout the execution of the program. Final variables can be declared at the class level or within a method, and they are often written in all capital letters with underscores separating words to distinguish them from regular variables. The use of the final keyword can improve code readability by indicating that a variable should not be modified, but it can also lead to boilerplate code if used excessively.">final variable</a> is that we cannot modify the value of a final variable once assigned. Hence final variables must be used only for the values that we want to remain <strong>constant</strong> throughout the execution of the program.</p><h5 id="final-variables">Final variables</h5><p>The following code demonstrates two final variables: <code class="language-java">PI</code> which represents a well-known math constant and <code class="language-java">HELLO_MSG</code> which represents a string text.</p><pre><code class="language-java">final double PI = 3.1415;
final String HELLO_MSG = "Hello";

System.out.println(PI); // 3.1415
System.out.println(HELLO_MSG); // Hello</code></pre><p>Both variables cannot be modified since they are marked as final, but they can be accessed as many times as we need them.</p><p>A good practice is to represent a final variable in all caps using an <a class="theory-lookup" href="/learn/step/10545" rel="noopener noreferrer nofollow" target="_blank" title="The underscore in Java is a special character that can be used to separate groups of digits within a number to improve code readability. | It is allowed to use an underscore between digits since Java 7, but there are certain limitations, such as not being able to use it at the beginning or end of the literal, adjacent to the decimal point, or before the 'f' or 'd' suffix. The underscore is ignored during calculations or when printing the output.">underscore</a> to separate words. It allows you to distinguish them from regular variables. But sometimes, you will also see final variables written in lowercase: this is also admissible for <strong>local final variables</strong>.</p><p> </p><p></p><div class="alert alert-warning"><p>Note, that the compiler will produce an error when trying to modify the value of a final variable.</p></div><p></p><p> </p><p>Here is an example:</p><pre><code class="language-java">final double PI = 3.1415;
PI = 3.1416; // error line</code></pre><p>The Java compiler outputs the message: <code class="language-java">cannot assign a value to final variable 'PI'</code>.</p><p> </p><p></p><div class="alert alert-warning"><p>Important, if a final variable has not been assigned before using it, the compiler also will produce an error <code class="language-java">"variable might not have been initialized"</code>.</p></div><p></p><p> </p><p>Here is an example:</p><pre><code class="language-java">final boolean FALSE;
System.out.println(FALSE); // error line</code></pre><p>To fix it, just assign a value before accessing the value of a final variable:</p><pre><code class="language-java">final boolean FALSE;       // not initialized
FALSE = false;             // initialized
System.out.println(FALSE); // no errors here</code></pre><p>Notice that the value of a final variable can be reassigned to a regular variable without any restrictions:</p><pre><code class="language-java">final int count = 10;
int cnt = count;
cnt = 20; // no errors here, cnt is not final</code></pre><p>The value of a regular variable can be changed any time as always.</p><h5 id="final-reference-variables">Final reference variables</h5><p>The <code class="language-java">final</code> keyword can be legally used with <a class="theory-lookup" href="/learn/step/18747" rel="noopener noreferrer nofollow" target="_blank" title="A reference variable in Java is a special type of value that indicates no actual value is assigned to a variable. | It is often associated with the concept of null, which can cause a common exception known as a NullPointerException (NPE). Reference variables are used for reference types, such as objects created from classes, and are typically created using the 'new' keyword, which allocates memory for the object and returns a reference to it. This reference can then be assigned to a variable, allowing you to manipulate the object.">reference variables</a>. In this case, the final keyword means that it is not possible to reassign a reference to the variable.</p><p>Here is an example with the <code class="language-java">StringBuilder</code> class which is a <a class="theory-lookup" href="/learn/step/4727" rel="noopener noreferrer nofollow" target="_blank" title="In Java, mutable refers to an object or variable whose state can be changed after it has been created. | This is in contrast to immutable objects, whose state is fixed at creation time. Mutable objects have fields that can be modified, and this can lead to issues with thread safety and unexpected behavior if not managed carefully. It is important to understand the mutability of objects and variables when writing Java code, as it can impact the behavior and correctness of your program.">mutable</a> version of <code class="language-java">String</code>.</p><pre><code class="language-java">final StringBuilder builder = new StringBuilder();
builder = new StringBuilder(); // error line</code></pre><p>In this code, the second line won't compile since we are trying to reassign a reference to the final variable <code class="language-java">builder</code>. But there is one important point.</p><p> </p><p></p><div class="alert alert-warning"><p>Note, that it is always possible to change the internal state of an object pointed at by a final reference variable, i.e. the constant is only the variable itself (the reference), not the <a class="theory-lookup" href="/learn/step/4727" rel="noopener noreferrer nofollow" target="_blank" title="In Java, an object is an instance of a class. | It represents a real-world entity with a specific state and behavior. The state of an object is defined by the values assigned to its fields or attributes, while its behavior is defined by the methods it can execute. Objects are created on the heap and are accessed through references, which are variables that store the memory address of the object.">object</a> to which it refers.</p></div><p></p><p> </p><p>So, the following code is absolutely correct:</p><pre><code class="language-java">final StringBuilder builder = new StringBuilder(); // ""
builder.append("Hello!"); // it works
System.out.println(builder.toString()); // Hello!</code></pre><p>As you can see, this code changed the internal state of an object (<code class="language-java">""</code> â†’ <code class="language-java">"Hello!"</code>)  referenced by a final variable. When we invoked the <code class="language-java">append()</code> method we changed not the object itself but just the value of its <a class="theory-lookup" href="/learn/step/11523" rel="noopener noreferrer nofollow" target="_blank" title="A field in Java is a variable that is declared within a class, and it is used to store data. | It can have any type, including primitive types (such as int, float, boolean, etc.) and class types (even the same class). A class can have multiple fields, and they are used to store the current state or data of the instance of the class. Fields can be accessed and modified through methods, and they are a crucial part of object-oriented programming in Java.">fields</a>. The  <code class="language-java">append()</code> <a class="theory-lookup" href="/learn/step/10982" rel="noopener noreferrer nofollow" target="_blank" title="A method in Java is a self-contained block of code that performs a specific task. | It is a fundamental unit of functionality in Java, similar to a function in other programming languages. Methods are used to encapsulate code, making it reusable and modular. They can take inputs in the form of parameters, and return outputs. Methods can also be overloaded, allowing for multiple methods with the same name but different parameters. They are a crucial part of object-oriented programming, as they represent the behavior of objects and classes.">method</a> is one of the main operations on a <code class="language-java">StringBuilder</code> that are not available in <code class="language-java">String</code>. It converts its argument to a <code class="language-java">String</code> and then appends its <a class="theory-lookup" href="/learn/step/3522" rel="noopener noreferrer nofollow" target="_blank" title="In Java, a character is a single symbol, denoted with a single quote, that can represent a letter, digit, whitespace, or other symbols. | It is actually an integer type that stores the Unicode integer value of each character, which is why character literals can be used as integers if needed. The numeric value of a character can be found in a special table online, and since Java 7, underscores can be used between digits to increase the readability of numeric literals.">characters</a> to the character sequence. We will discuss the <code class="language-java">StringBuilder</code> class and its methods in further topics.</p><p>Since Java 11, it is also possible to use <code class="language-java">final</code> with <code class="language-java">var</code> to use automatic <a class="theory-lookup" href="/learn/step/3518" rel="noopener noreferrer nofollow" target="_blank" title="In Java, type inference is a feature that allows the compiler to automatically deduce the data type of a variable based on the value it is initialized with, using the var keyword. | This can make the code more concise, but it may also affect code readability negatively as the type is not explicitly indicated. Type inference is available from Java 10 onwards, and it can be used in variable declarations and initializations, as well as in the creation of objects of generic classes.">type inference</a> for a constant variable.</p><pre><code class="language-java">final var FINAL_VAR = 10; // int
final var MSG = "Hello!"; // String</code></pre><h5 id="when-to-use-final-variables">When to use final variables</h5><p>We hope you understand how the <code class="language-java">final</code> keyword works for local variables. Now it's time to figure out when to use it.</p><p>Some programmers mark all variables that they do not want to modify as <code class="language-java">final</code>. In this case, the program will contain a lot of such variables.</p><pre><code class="language-java">final Scanner scanner = new Scanner(System.in);
final int a = scanner.nextInt();
final int b = scanner.nextInt();
System.out.println(a + b);</code></pre><p>This approach allows you to write programs with the minimum number of mutable variables which usually leads to fewer errors. In addition, the Java compiler can optimize code with final variables effectively and your program can be a little faster. But this is not always predictable behavior and needs some advanced knowledge.</p><p>There is also a counterargument: massive use of the <code class="language-java">final</code> keyword makes your code less readable (<a href="https://en.wikipedia.org/wiki/Boilerplate_code" rel="noopener noreferrer nofollow" target="_blank">boilerplate code</a>).</p><p>Thus, in our learning examples, we will not always write the <code class="language-java">final</code> keyword, but sometimes you will see such examples. In your solutions, you can write or avoid this keyword. During your real work as a programmer, we hope that the issue of using finals will be standardized for all programmers in the project.</p><p> </p><p></p><div class="alert alert-primary"><p>Interestingly, the <code class="language-java">final</code> keyword can also be used in some different contexts, not only for declaring constants. We will learn other ways to use this keyword in the next topics.</p></div><p></p>
</div>
